<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Verification â€” Security System</title>
  <meta name="theme-color" content="#001100"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

    :root{
      --bg-1: #000;
      --accent: #00ff88;
      --accent-2: #00cc66;
      --muted: #0a0a0a;
      --danger: #ff4d4d;
      --glass: rgba(0,0,0,0.75);
      --card-border: rgba(0,255,136,0.22);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Share Tech Mono', monospace;background:var(--bg-1);color:var(--accent);-webkit-font-smoothing:antialiased;}
    body{display:flex;align-items:center;justify-content:center;overflow:hidden;padding:24px;}

    .bg-wrap {position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;}
    canvas#matrixCanvas{width:100%;height:100%;display:block}
    .noise {
      position:fixed;inset:0;z-index:0;opacity:0.03;background-image:radial-gradient(circle at 20% 30%, rgba(255,255,255,0.02), transparent 2px), radial-gradient(circle at 80% 70%, rgba(255,255,255,0.01), transparent 2px);
      mix-blend-mode:screen;
    }

    .card {
      position:relative;z-index:2;
      width: min(520px, 92vw);
      background: linear-gradient(180deg, rgba(0,0,0,0.85), rgba(2,2,2,0.9));
      border-radius: 14px;
      padding: 32px;
      border: 1px solid var(--card-border);
      box-shadow: 0 8px 40px rgba(0,255,136,0.06), inset 0 0 30px rgba(0,255,136,0.02);
      backdrop-filter: blur(6px);
      display:grid;
      grid-template-columns: 1fr 210px;
      gap:20px;
      align-items:center;
    }

    .ui {padding-right: 6px;}
    .title {
      font-size:20px;
      color:var(--accent);
      margin:0 0 8px 0;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .subtitle{font-size:12px;color:rgba(0,255,136,0.7);margin:0 0 18px 0}

    .input-wrap {display:flex;gap:12px;align-items:center}
    input[type="password"]{
      width:100%;
      padding:14px 16px;
      border-radius:8px;
      border:2px solid rgba(0,255,136,0.14);
      background:var(--muted);
      color:var(--accent);
      font-size:18px;
      text-align:center;
      outline:none;
      box-shadow:0 0 18px rgba(0,255,136,0.03) inset;
      transition: box-shadow .25s, transform .12s;
    }
    input[type="password"]:focus{
      box-shadow:0 0 28px rgba(0,255,136,0.18) inset, 0 0 18px rgba(0,255,136,0.12);
      transform: translateY(-2px);
    }

    .shake {animation:shake .45s;}
    @keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(6px)}40%{transform:translateX(-6px)}60%{transform:translateX(4px)}80%{transform:translateX(-2px)}100%{transform:translateX(0)}}

    .controls {display:flex;gap:10px;align-items:center}
    button.primary {
      padding:12px 18px;border-radius:8px;border:none;cursor:pointer;
      background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#001;
      font-weight:700; box-shadow:0 6px 24px rgba(0,255,136,0.12);
      transition:transform .18s, box-shadow .18s;
    }
    button.primary:active{transform:translateY(2px)}
    button.ghost {
      background:transparent;border:1px solid rgba(255,255,255,0.04);color:rgba(0,255,136,0.8);padding:10px;border-radius:8px;cursor:pointer;font-size:13px
    }

    .hint {margin-top:12px;font-size:13px;color:rgba(0,255,136,0.45)}

    .panel {display:flex;flex-direction:column;align-items:center;gap:14px;}
    .scanner {
      width:160px;height:160px;border-radius:50%;background:
      radial-gradient(circle at 30% 30%, rgba(0,255,136,0.06), transparent 30%),
      linear-gradient(180deg, rgba(0,0,0,0.4), rgba(0,0,0,0.6));
      border:2px solid rgba(0,255,136,0.12);
      box-shadow:0 6px 30px rgba(0,255,136,0.06), inset 0 0 40px rgba(0,255,136,0.02);
      display:grid;place-items:center;position:relative;overflow:hidden;
    }
    .ring {position:absolute;inset:0;border-radius:50%;border:2px dashed rgba(0,255,136,0.08);animation: spin 8s linear infinite;mix-blend-mode:screen;}
    .ring.r2{animation-duration:10s;opacity:0.7;transform:scale(.9)}
    .ring.r3{animation-duration:12s;opacity:0.5;transform:scale(.8)}
    @keyframes spin{to{transform:rotate(360deg)}}

    .finger {
      width:82px;height:82px;border-radius:12px;background:linear-gradient(180deg, rgba(0,255,136,0.15), rgba(0,255,136,0.06));
      display:grid;place-items:center;font-size:36px;color:rgba(0,255,136,0.95);text-shadow:0 0 8px rgba(0,255,136,0.16);
      transform:translateY(0);transition:transform .35s ease;
    }
    .scanner.scanning .finger{transform:translateY(-6px) scale(1.02); box-shadow:0 12px 28px rgba(0,255,136,0.08)}

    .progress-bar {
      width:100%;height:10px;
      background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:99px;overflow:hidden;border:1px solid rgba(0,255,136,0.04)
    }
    .progress {
      height:100%;width:0%;background:linear-gradient(90deg, rgba(0,255,136,0.25), rgba(0,255,136,0.6));
      box-shadow:0 4px 18px rgba(0,255,136,0.08);transition:width .25s linear;
    }

    .status {font-size:13px;color:rgba(0,255,136,0.7)}

    .msg {margin-top:10px;font-size:13px}
    .msg.error{color:var(--danger);text-shadow:0 0 8px rgba(255,77,77,0.12)}
    .msg.ok{color:var(--accent);text-shadow:0 0 8px rgba(0,255,136,0.08)}

    .cooldown {margin-top:12px;font-size:13px;color:rgba(255,100,100,0.9)}

    @media (max-width:720px){
      .card{grid-template-columns:1fr;gap:18px;padding:22px}
      .panel{flex-direction:row;justify-content:space-between}
    }

    @media (prefers-reduced-motion: reduce){
      .ring{animation:none}
      .scanner.scanning .finger{transition:none}
      #matrixCanvas{display:none}
    }
  </style>
</head>
<body>

  <div class="bg-wrap">
    <canvas id="matrixCanvas" aria-hidden="true"></canvas>
    <div class="noise" aria-hidden="true"></div>
  </div>

  <main class="card" role="main" aria-labelledby="title">
    <section class="ui" aria-label="Verification Interface">
      <h1 id="title" class="title">Verification System â€” <span style="font-size:12px;color:rgba(0,255,136,0.6)">Secure Mode</span></h1>
      <p class="subtitle">Enter the authorization code to access. The system logs attempts and applies lockout after repeated failures.</p>

      <div class="input-wrap">
        <input id="codeInput" autocomplete="one-time-code" aria-label="Verification Code Input" type="password" inputmode="numeric" placeholder="â—â—â—â—">
        <div class="controls">
          <button id="enterBtn" class="primary" aria-label="Enter">Enter</button>
          <button id="resetBtn" class="ghost" aria-label="Clear">Clear</button>
        </div>
      </div>

      <div class="hint">Press <strong>Enter</strong> to submit, <strong>Esc</strong> to clear field.</div>

      <div id="message" class="msg" role="status" aria-live="polite"></div>
      <div id="cooldown" class="cooldown" hidden></div>
    </section>

    <aside class="panel" aria-label="Scan Components">
      <div class="scanner" id="scanner">
        <div class="ring r1"></div>
        <div class="ring r2"></div>
        <div class="ring r3"></div>
        <div class="finger" id="finger">ðŸ”’</div>
      </div>

      <div style="width:100%;">
        <div class="progress-bar">
          <div id="progress" class="progress"></div>
        </div>
        <div class="status">Status: <span id="statusText">Ready</span></div>
        <div id="attempts" class="status" style="margin-top:6px;color:rgba(255,255,255,0.06)">Attempts left: <span id="left">3</span></div>
      </div>
    </aside>
  </main>

<script>
  const MAX_ATTEMPTS = 3;
  const LOCK_SECONDS = 20;
  const COUNTDOWN_TO_REDIRECT = 2;
  const correctCode = "TAG-7347";

  const codeInput = document.getElementById('codeInput');
  const enterBtn = document.getElementById('enterBtn');
  const resetBtn = document.getElementById('resetBtn');
  const message = document.getElementById('message');
  const scanner = document.getElementById('scanner');
  const finger = document.getElementById('finger');
  const progressEl = document.getElementById('progress');
  const statusText = document.getElementById('statusText');
  const leftEl = document.getElementById('left');
  const cooldownEl = document.getElementById('cooldown');

  let attemptsLeft = MAX_ATTEMPTS;
  let lockedUntil = 0;

  function setMessage(txt, kind='info'){
    message.className = 'msg ' + (kind==='error'?'error': kind==='ok'?'ok':'');
    message.textContent = txt;
  }

  function updateUI(){
    leftEl.textContent = attemptsLeft;
    if(Date.now() < lockedUntil){
      const rem = Math.ceil((lockedUntil - Date.now())/1000);
      cooldownEl.hidden = false;
      cooldownEl.textContent = `Locked â€” wait ${rem}s`;
      statusText.textContent = 'Locked';
      codeInput.disabled = true;
      enterBtn.disabled = true;
      resetBtn.disabled = true;
    } else {
      cooldownEl.hidden = true;
      codeInput.disabled = false;
      enterBtn.disabled = false;
      resetBtn.disabled = false;
      statusText.textContent = 'Ready';
    }
  }

  function shakeInput(){
    codeInput.classList.remove('shake');
    void codeInput.offsetWidth;
    codeInput.classList.add('shake');
  }

  async function doScanAnimation(success){
    scanner.classList.add('scanning');
    statusText.textContent = 'Verifying...';
    progressEl.style.width = '0%';
    for(let i=0;i<=100;i+=8){
      progressEl.style.width = i + '%';
      await new Promise(r=>setTimeout(r, 28));
    }
    if(success){
      finger.textContent = 'âœ…';
      setMessage('Access Granted â€” redirecting...', 'ok');
    } else {
      finger.textContent = 'âŒ';
      setMessage('Incorrect code', 'error');
    }
    await new Promise(r=>setTimeout(r, 450));
    scanner.classList.remove('scanning');
    finger.textContent = 'ðŸ”’';
    progressEl.style.width = '0%';
  }

  async function verifyCode(plain){
    if(Date.now() < lockedUntil){
      setMessage('System locked â€” please wait', 'error');
      return;
    }

    if(!plain || plain.trim().length === 0){
      setMessage('Enter the code first', 'error');
      shakeInput();
      return;
    }

    const ok = (plain.trim() === correctCode);
    await doScanAnimation(ok);

    if(ok){
      let t = COUNTDOWN_TO_REDIRECT;
      statusText.textContent = `Redirecting in ${t}s`;
      codeInput.disabled = true;
      enterBtn.disabled = true;
      const countdown = setInterval(()=>{
        t--;
        if(t>0) statusText.textContent = `Redirecting in ${t}s`;
        else {
          clearInterval(countdown);
          window.location.href = "homet.html";
        }
      }, 1000);
    } else {
      attemptsLeft--;
      if(attemptsLeft <= 0){
        lockedUntil = Date.now() + LOCK_SECONDS*1000;
        attemptsLeft = MAX_ATTEMPTS;
        setMessage(`Too many attempts. Locked for ${LOCK_SECONDS}s.`, 'error');
        shakeInput();
      } else {
        setMessage(`Wrong code. Attempts left: ${attemptsLeft}`, 'error');
        shakeInput();
      }
      updateUI();
    }
  }

  enterBtn.addEventListener('click', ()=> verifyCode(codeInput.value));
  resetBtn.addEventListener('click', ()=>{ codeInput.value = ''; codeInput.focus(); setMessage(''); });

  codeInput.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ e.preventDefault(); verifyCode(codeInput.value); }
    if(e.key === 'Escape'){ codeInput.value=''; setMessage('Cleared'); }
  });

  setInterval(updateUI, 500);
  updateUI();

  (function(){
    const canvas = document.getElementById('matrixCanvas');
    const ctx = canvas.getContext('2d');
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    resize(); window.addEventListener('resize', resize);

    const fontSize = Math.max(12, Math.floor(Math.min(innerWidth, innerHeight) / 80));
    const columns = Math.floor(canvas.width / fontSize);
    const drops = Array.from({length: columns}, ()=>Math.random()*canvas.height/fontSize);

    const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#%&*+=-<>/".split('');

    function draw(){
      ctx.fillStyle = "rgba(0,0,0,0.06)";
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.font = `${fontSize}px monospace`;
      ctx.fillStyle = "rgba(0,255,136,0.12)";
      for(let i=0;i<drops.length;i++){
        const txt = chars[Math.floor(Math.random()*chars.length)];
        ctx.fillText(txt, i*fontSize, drops[i]*fontSize);
        drops[i] += Math.random()*0.8 + 0.6;
        if(drops[i]*fontSize > canvas.height && Math.random()>0.995) drops[i]=0;
      }
    }
    setInterval(draw, 40);
  })();

  codeInput.focus();
</script>

</body>
</html>
